___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "DataReporter WebCare CMP V2.0",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAFwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMDRUMDg6NDQ6NDErMDIwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMTEtMDNUMDY6MDc6MDgrMDE6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMTEtMDNUMDY6MDc6MDgrMDE6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wOS0wNFQwODo0NDo0MSswMjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEi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\u003d\u003d"
  },
  "description": "Supports Google Consent Mode v2 for WebCare CMP. See https://www.datareporter.eu/products/webcare for details.",
  "containerContexts": [
    "WEB"
  ],
  "categories": ["TAG_MANAGEMENT","UTILITY"]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "webcareId",
    "displayName": "WebCare CMP Id",
    "simpleValueType": true,
    "help": "You will find this Id in the integration section in your license. If an Id is entered here, the banner will be shown."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// The first two lines are optional, use if you want to enable logging
const log = require('logToConsole');
log('data =', data);

const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const getCookieValues = require('getCookieValues');
const callInWindow = require('callInWindow');
const gtagSet = require('gtagSet');
const injectScript = require('injectScript');

const cookieNameMode = 'cookieconsent_mode';
const cookieNameStatus = 'cookieconsent_status';


/**
 * Splits the input string using comma as a delimiter, returning an array of
 * strings
 */
const splitInput = (input) => {
  return input.split(',')
      .map(entry => entry.trim())
      .filter(entry => entry.length !== 0);
};


/**
 * Called to set default consent
 */
const onUserConsent = (consent) => {
  const consentModeStates = {
    'ad_storage': consent.adConsentGranted ? 'granted' : 'denied',
    'ad_user_data': consent.adConsentGranted ? 'granted' : 'denied',
    'ad_personalization': consent.adConsentGranted ? 'granted' : 'denied',
    'analytics_storage': consent.analyticsConsentGranted ? 'granted' : 'denied'    
  };
  updateConsentState(consentModeStates);
  log(consentModeStates);
  return consentModeStates;
};



const getCookieValue = (cvalue) => {
  if (cvalue) {
    if (typeof(cvalue) !== "string") {
      if (cvalue.length > 0) {
        return cvalue[0];
      }
    } else {
      return "" + cvalue; 
    }
  }
  return "";
};


/**
 * Executes the default command, sets the developer ID, and sets up the consent
 * update callback
 */
const main = (data) => {

  setDefaultConsentState({
    'ad_storage': 'denied',
    'analytics_storage': 'granted',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied',
    'region': ['US-CA']
  });
  
  setDefaultConsentState({
    'ad_storage': 'denied',
    'analytics_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied'
  });
  
  // see if we have to load the banner
  if (data.webcareId && data.webcareId.length > 0) {
    const baseUrl = "https://webcachex-eu.datareporter.eu/loader/v2/cmp-load.js";
    injectScript(baseUrl + "?url=" + data.webcareId);
  }
  
  // Check if cookie is set and has values that correspond to Google consent
  // types. If it does, run onUserConsent().
  var userCookieStatus = "deny";
  var userCookieMode = "";

  // TEST: use mock data on testing mode (data.test==true)
  var testResult = {}; // this is returned to unit tests
  if (data.test === true) {
  
    if (data.cookieconsent_status) {
      userCookieStatus = getCookieValue(data.cookieconsent_status); 
    }
    if (data.cookieconsent_mode) {
      userCookieMode = getCookieValue(data.cookieconsent_mode); 
    }
  
  } else {
    userCookieStatus = getCookieValue(getCookieValues(cookieNameStatus));
    userCookieMode = getCookieValue(getCookieValues(cookieNameMode));
  }
  
  if (userCookieStatus === 'allow') {
  	const updateData = {
      adConsentGranted: true,
      analyticsConsentGranted: true
    };
    testResult.updateData = onUserConsent(updateData);
  } else {
  
    var defMarketing = false;
    var defStatistic = false;
    if (userCookieMode) {
      if (userCookieMode.indexOf('statistic') >= 0) {
        defStatistic = true; 
      }
      if (userCookieMode.indexOf('marketing') >= 0) {
        defMarketing = true; 
      }
    }
  
    const updateData = {
      adConsentGranted: defMarketing,
      analyticsConsentGranted: defStatistic
    };
   
    
    testResult.updateData = onUserConsent(updateData);
  }
  
  /**
   * Add event listener to trigger update when consent changes
   * Disabled because the function does not exist when
   * gtm loads our cmp. CMP does this with gtag
   */
  // callInWindow('addConsentListenerWebCare', onUserConsent);
  
  
  return testResult;
};

var result = main(data);

data.gtmOnSuccess();

if (data.test === true) {
  return result;
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "addConsentListenerWebCare"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "cookieconsent_mode"
              },
              {
                "type": 1,
                "string": "cookieconsent_status"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ads_data_redaction"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://webcachex-eu.datareporter.eu/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: NoCookies RunData
  code: |
    const mockData = {
      // Mocked field values
      test: true
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("denied");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("denied");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("denied");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("denied");
- name: General allow
  code: |-
    const mockData = {
      // Mocked field values
      test: true,
      cookieconsent_status: ['allow'],
      cookieconsent_mode: ['']
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("granted");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("granted");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("granted");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("granted");
- name: General deny
  code: |-
    const mockData = {
      // Mocked field values
      test: true,
      cookieconsent_status: ['deny'],
      cookieconsent_mode: ""
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("denied");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("denied");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("denied");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("denied");
- name: Statistics only
  code: |-
    const mockData = {
      // Mocked field values
      test: true,
      cookieconsent_status: ['deny'],
      cookieconsent_mode: ["['statistics','unclassified']"]
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("denied");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("granted");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("denied");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("denied");
- name: Marketing only
  code: |-
    const mockData = {
      // Mocked field values
      test: true,
      cookieconsent_status: ['deny'],
      cookieconsent_mode: ["['marketing']"]
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("granted");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("denied");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("granted");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("granted");
- name: Statistic+Marketing
  code: |-
    const mockData = {
      // Mocked field values
      test: true,
      cookieconsent_status: ['deny'],
      cookieconsent_mode: ["['statistics','marketing','unclassified']"]
    };

    // Call runCode to run the template's code.
    let testResult = runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


    assertThat(testResult.updateData.ad_storage).isEqualTo("granted");
    assertThat(testResult.updateData.analytics_storage).isEqualTo("granted");
    assertThat(testResult.updateData.ad_user_data).isEqualTo("granted");
    assertThat(testResult.updateData.ad_personalization).isEqualTo("granted");


___NOTES___

Created on 31.1.2024, 07:43:30


